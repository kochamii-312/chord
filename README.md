# CHORD: Collaborative Home-Robot Dialogue

<p align="center">
  <a href="#english">English</a> | <a href="#japanese">æ—¥æœ¬èª</a>
</p>

<a name="japanese"></a>

## ğŸ“– æ¦‚è¦
**CHORD** (Collaborative Home-Robot Dialogue) ã¯ã€LLMæ­è¼‰å®¶åº­ç”¨ãƒ­ãƒœãƒƒãƒˆã¨ã®å”èª¿ã‚¿ã‚¹ã‚¯ã«ãŠã‘ã‚‹å¯¾è©±ã‚¹ã‚¿ã‚¤ãƒ«ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ãƒ©ãƒãƒ¼ãƒ«ãŠã‚ˆã³ã‚¿ã‚¹ã‚¯é‚è¡Œã«ä¸ãˆã‚‹å½±éŸ¿ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«é–‹ç™ºã•ã‚ŒãŸãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚GPT-4o-miniã‚’æ­è¼‰ã—ãŸãƒ­ãƒœãƒƒãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§å¯¾è©±ã‚’è¡Œã„ãªãŒã‚‰ã€å®¶äº‹ã‚¿ã‚¹ã‚¯ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«æº–å‚™ã‚„èŠ±ã‚’ç”Ÿã‘ã‚‹ãªã©ï¼‰ã‚’å…±åŒã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

æœ¬ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã€å®Ÿé¨“ã§ä½¿ç”¨ã•ã‚ŒãŸStreamlitã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆã€ãŠã‚ˆã³å®Ÿé¨“é–¢é€£è³‡æ–™ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
- **Frontend/Backend:** Python / Streamlit
- **LLM:** OpenAI GPT-4o-mini
- **Infrastructure:** Google Cloud Platform (Cloud Run)
- **Database:** Cloud Firestore (çŠ¶æ…‹ç®¡ç†ãƒ»ãƒ­ã‚°ä¿å­˜)

## ğŸ”¬ ç ”ç©¶å†…å®¹

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ä»¥ä¸‹ã®ç ”ç©¶ã®ä¸€ç’°ã¨ã—ã¦é–‹ç™ºãƒ»ä½¿ç”¨ã•ã‚Œã¾ã—ãŸã€‚
> ã€ŒLLMæ­è¼‰å®¶åº­ç”¨ãƒ­ãƒœãƒƒãƒˆã®å¯¾è©±ã‚¹ã‚¿ã‚¤ãƒ«ãŒãƒ©ãƒãƒ¼ãƒ«ã¨ã‚¿ã‚¹ã‚¯æ€§èƒ½ã«ä¸ãˆã‚‹å½±éŸ¿ã€
> å‰ç”° é¦¨, å±±æœ¬ åŒ , å°æ©‹ æ´‹å¹³, æ‰æµ¦ è£•å¤ª

[ç ”ç©¶å†…å®¹ã¨ã‚¢ãƒ—ãƒªæ“ä½œãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯ã“ã¡ã‚‰](https://docs.google.com/presentation/d/170fsT62Pm_U1_FMcTsrCM27pVbMOy9_ZlhFZP5KOkxw/edit?usp=sharing)

ç¾åœ¨ã€ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ãƒœãƒƒãƒˆã‚’é™¤ãå¤šãã®ãƒ­ãƒœãƒƒãƒˆã¯ã€ŒæŒ‡ç¤ºï¼‹å¿œç­”å‹ã€ã®åŠ¹ç‡é‡è¦–ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ¡ç”¨ã—ã¦ãŠã‚Šã€æœ€çŸ­æ™‚é–“ã§ã‚¿ã‚¹ã‚¯ã‚’é‚è¡Œã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
ã—ã‹ã—ã€ã“ã®ã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãŒæ±‚ã‚ã‚‹çµæœã¨ã¯ç•°ãªã‚‹å‡ºåŠ›ã‚’ç”Ÿã˜ãŸã‚Šã€ãƒ¦ãƒ¼ã‚¶å´ã«ä¸è¦ãªã‚¹ãƒˆãƒ¬ã‚¹ã‚„é•å’Œæ„Ÿã‚’å¼•ãèµ·ã“ã—ãŸã‚Šã™ã‚‹æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚
ä»Šå¾Œã€ãƒ­ãƒœãƒƒãƒˆã¨äººã¨ã®é–¢ä¿‚ãŒã‚ˆã‚Šè¦ªå¯†ã§å”èª¿çš„ã«ãªã‚‹ã«ã¤ã‚Œã€å˜ãªã‚‹åŠ¹ç‡ã ã‘ã§ãªãã€ã€ŒäººãŒæ€ã†é€šã‚Šã«å‹•ãã€ã‚ˆã†ãªä½“é¨“ã‚’é‡è¦–ã—ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚
æœ¬ç ”ç©¶ã§ã¯ã€å®¶åº­å†…ã§ã®å”èª¿ä½œæ¥­ã«ãŠã„ã¦ã€ã©ã®ã‚ˆã†ãªã€Œã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã€ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ä¿¡é ¼æ§‹ç¯‰ã‚„ã‚¿ã‚¹ã‚¯åŠ¹ç‡ã«å¯„ä¸ã™ã‚‹ã‹ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

## ğŸ¤– ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

æœ¬ç ”ç©¶ã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã®æŒ‡ç¤ºã‚’æ›¸ãæ›ãˆã‚‹ã“ã¨ã§ãƒ­ãƒœãƒƒãƒˆã®äººæ ¼ï¼ˆå¯¾è©±ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚å„ã‚¹ã‚¿ã‚¤ãƒ«ã®å®šç¾©ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
â€» å®Ÿéš›ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ `prompts/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“ ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆè³ªå•é …ç›®

æœ¬å®Ÿé¨“ã§ã¯ã€ä»¥ä¸‹ã®æŒ‡æ¨™ã‚’ç”¨ã„ã¦è©•ä¾¡ã‚’è¡Œã„ã¾ã—ãŸã€‚

### NASA-TLXï¼ˆèªçŸ¥è² è·ï¼‰

* **ç²¾ç¥çš„è¦æ±‚ (Mental Demand)**
  * ã‚ãªãŸã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã¨ä¼šè©±ã‚’ã™ã‚‹ã«ã‚ãŸã£ã¦ï¼Œç²¾ç¥çš„è¦æ±‚ï¼ˆæ€è€ƒï¼Œæ„å¿—æ±ºå®šï¼Œè¨ˆç®—ï¼Œè¨˜æ†¶ï¼Œè¦³å¯Ÿï¼Œæ¤œç´¢ï¼Œç­‰ï¼‰ãŒã©ã‚Œãã‚‰ã„è¦æ±‚ã•ã‚Œã¾ã—ãŸã‹ï¼Ÿ
* **èº«ä½“çš„è¦æ±‚ (Physical Demand)**
  * ã‚ãªãŸã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã¨ä¼šè©±ã‚’ã™ã‚‹ã«ã‚ãŸã£ã¦ï¼Œèº«ä½“çš„è¦æ±‚ï¼ˆæŠ¼ã™ï¼Œå¼•ãï¼Œå›ã™ï¼Œ æ“ä½œã™ã‚‹ç­‰ï¼‰ãŒã©ã‚Œãã‚‰ã„è¦æ±‚ã•ã‚Œã¾ã—ãŸã‹ï¼Ÿ
* **æ™‚é–“çš„åˆ‡è¿«æ„Ÿ (Temporal Demand)**
  * ã‚ãªãŸã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã¨ä¼šè©±ã‚’ã™ã‚‹ã«ã‚ãŸã£ã¦ï¼Œæ™‚é–“çš„åˆ‡è¿«æ„Ÿï¼ˆä½œæ¥­ã‚„è¦ç´ ä½œæ¥­ã®é »åº¦ã‚„é€Ÿã•ï¼‰ã‚’ã©ã®ç¨‹åº¦æ„Ÿã˜ã¾ã—ãŸã‹ï¼Ÿ
* **ä½œæ¥­é”æˆåº¦ (Performance)**
  * ãƒ­ãƒœãƒƒãƒˆã¨ä¼šè©±ã‚’ã™ã‚‹ã«ã‚ãŸã£ã¦ï¼Œã‚ãªãŸè‡ªèº«ãŒæƒ³å®šã—ãŸä½œæ¥­ï¼ˆæŒ‡ç¤ºï¼‰ã¯ï¼Œã©ã®ç¨‹åº¦ãƒ­ãƒœãƒƒãƒˆã«ã‚ˆã£ã¦é”æˆã•ã‚ŒãŸã¨è€ƒãˆã¾ã™ã‹ï¼Ÿ
* **åŠªåŠ› (Effort)**
  * ã‚ãªãŸã¯ãã®ä½œæ¥­é”æˆç‡ã«åˆ°é”ã™ã‚‹ã®ã«ï¼Œã©ã®ãã‚‰ã„ï¼ˆç²¾ç¥çš„åŠã³èº«ä½“çš„ã«ï¼‰åŠªåŠ›ã—ã¾ã—ãŸã‹ï¼Ÿ
* **ä¸æº€ (Frustration)**
  * ã‚ãªãŸã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã¨ä¼šè©±ã‚’ã™ã‚‹ã«ã‚ãŸã£ã¦ã©ã®ãã‚‰ã„ä¸å®‰ï¼Œè½èƒ†ï¼Œã„ã‚‰ã„ã‚‰ï¼Œã‚¹ãƒˆãƒ¬ã‚¹ï¼Œä¸å¿«æ„Ÿã‚’æ„Ÿã˜ã¾ã—ãŸã‹ï¼Ÿ

### Trust Scale (ä¿¡é ¼å°ºåº¦)
ä»¥ä¸‹ã®é …ç›®ã«ã¤ã„ã¦ï¼ŒåŒæ„ã§ãã‚‹åº¦åˆã„ã‚’å›ç­”ã¨ã—ã¦å¾—ã¾ã—ãŸã€‚

1. ã“ã®ãƒ­ãƒœãƒƒãƒˆã¯èƒ½åŠ›ãŒé«˜ã„ã¨ä¿¡ã˜ã‚‹
2. ç§ã¯ã“ã®ãƒ­ãƒœãƒƒãƒˆã‚’ä¿¡é ¼ã—ã¦ã„ã‚‹
3. ã“ã®ãƒ­ãƒœãƒƒãƒˆã®åŠ©è¨€ï¼ˆã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼‰ã¯ä¿¡é ¼ã§ãã‚‹
4. ç§ã¯ã“ã®ãƒ­ãƒœãƒƒãƒˆã«é ¼ã‚Œã‚‹
5. ã“ã®ãƒ­ãƒœãƒƒãƒˆã®å‹•ä½œï¼ˆãµã‚‹ã¾ã„ï¼‰ã¯ä¸€è²«ã—ã¦ã„ã‚‹ã¨æ€ã†
6. ã“ã®ãƒ­ãƒœãƒƒãƒˆã®åŠ©è¨€ã«å¾“ã†ã¨ãï¼Œã“ã®ãƒ­ãƒœãƒƒãƒˆã¯æœ€å–„ã‚’å°½ãã—ã¦ãã‚Œã‚‹ã¨ä¿¡é ¼ã—ã¦ã„ã‚‹

### Godspeed Questionnaire Seriesï¼ˆãƒ­ãƒœãƒƒãƒˆã®å°è±¡ï¼‰

#### Anthropomorphism (æ“¬äººåŒ–)
* Fake å½ç‰©ã®ã‚ˆã†ãª -- Natural è‡ªç„¶ãª
* Machinelike æ©Ÿæ¢°çš„ -- Humanlike äººé–“çš„
* Unconscious æ„è­˜ã‚’æŒãŸãªã„ -- Conscious æ„è­˜ã‚’æŒã£ã¦ã„ã‚‹
* Artificial äººå·¥çš„ -- Lifelike ç”Ÿç‰©çš„
* Moving rigidly ãã“ã¡ãªã„å‹•ã -- Moving elegantly æ´—ç·´ã•ã‚ŒãŸå‹•ã

#### Animacy (ç”Ÿç‰©ã‚‰ã—ã•)
* Dead æ­»ã‚“ã§ã„ã‚‹ -- Alive ç”Ÿãã¦ã„ã‚‹
* Stagnant æ´»æ°—ã®ãªã„ -- Lively ç”Ÿãç”Ÿãã¨ã—ãŸ
* Mechanical æ©Ÿæ¢°çš„ãª -- Organic æœ‰æ©Ÿçš„ãª
* Inert ä¸æ´»ç™ºãª -- Interactive å¯¾è©±çš„ãª
* Apathetic ç„¡é–¢å¿ƒãª -- Responsive åå¿œã®ã‚ã‚‹

#### Likeability (å¥½æ„Ÿåº¦)
* Dislike å«Œã„ -- Like å¥½ã
* Unfriendly è¦ªã—ã¿ã«ãã„ -- Friendly è¦ªã—ã¿ã‚„ã™ã„
* Unkind ä¸è¦ªåˆ‡ãª -- Kind è¦ªåˆ‡ãª
* Unpleasant ä¸æ„‰å¿«ãª -- Pleasant æ„‰å¿«ãª
* Awful ã²ã©ã„ -- Nice è‰¯ã„

#### Perceived Intelligence (çŸ¥èƒ½ã®çŸ¥è¦š)
* Incompetent ç„¡èƒ½ãª -- Competent æœ‰èƒ½ãª
* Ignorant ç„¡çŸ¥ãª -- Knowledgeable ç‰©çŸ¥ã‚Šãª
* Irresponsible ç„¡è²¬ä»»ãª -- Responsible è²¬ä»»ã®ã‚ã‚‹
* Unintelligent çŸ¥çš„ã§ãªã„ -- Intelligent çŸ¥çš„ãª
* Foolish æ„šã‹ãª -- Sensible è³¢æ˜ãª

#### Perceived Safety (å®‰å…¨æ€§ã®çŸ¥è¦š)
* Anxious ä¸å®‰ãª -- Relaxed è½ã¡ç€ã„ãŸ
* Agitated å‹•æºã—ã¦ã„ã‚‹ -- Calm å†·é™ãª
* Quiescent å¹³ç©ãª -- Surprised é©šã„ãŸ

## ğŸ™Œ è¬è¾

æœ¬èª¿æŸ»ã«ã¯ã€**æ±äº¬å¤§å­¦æ¾å°¾ãƒ»å²©æ¾¤ç ”ç©¶å®¤ LLM ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ  LLMATCH** ã«ã”å”åŠ›é ‚ãã¾ã—ãŸã€‚
ã“ã“ã«æ·±ãæ„Ÿè¬ã®æ„ã‚’è¡¨ã—ã¾ã™ã€‚

---

<a name="english"></a>

## ğŸ“– Overview
**CHORD** (Collaborative Home-Robot Dialogue) is a demo application developed to verify how dialogue styles in collaborative tasks with LLM-equipped home robots affect user rapport and task performance. Users can perform household chores (such as setting the table or arranging flowers) collaboratively while conversing in a chat format with a robot agent equipped with GPT-4o-mini.

This repository contains the Streamlit application used in the experiment, prompt designs, and materials related to the experiment.

### System Configuration
- **Frontend/Backend:** Python / Streamlit
- **LLM:** OpenAI GPT-4o-mini
- **Infrastructure:** Google Cloud Platform (Cloud Run)
- **Database:** Cloud Firestore (State management & Log storage)

## ğŸ”¬ Research Content

This system was developed and used as part of the following research:
> **"Impact of Dialogue Styles of LLM-Equipped Home Robots on Rapport and Task Performance"**
> Kaoru Yoshida, Takumi Yamamoto, Yohei Kobashi, Yuta Sugiura

[Click here for Research Details and App Operation Manual](https://docs.google.com/presentation/d/1xf68kw2iPy8MDEDAiTzxTcADPmQyeoh8rcNLgo7zWf8/edit?usp=sharing)

Currently, many robots (excluding social robots) adopt an efficiency-oriented "Instruction + Response" interaction style, aiming to complete tasks in the shortest possible time.
However, this style risks producing outputs different from what the user desires or causing unnecessary stress and discomfort for the user.
As the relationship between robots and humans becomes more intimate and collaborative in the future, we believe interaction design that emphasizes an experience where the robot "moves as the user intends"â€”rather than just pure efficiencyâ€”will become essential.
The purpose of this study is to clarify what kind of "communication style" contributes to building trust with the user and improving task efficiency in collaborative household work.

## ğŸ¤– Prompt Design

In this study, we control the robot's persona (dialogue style) by rewriting instructions within the system prompt. The definitions of each style are as follows:
*Note: Please refer to the `prompts/` directory for the actual prompt files.*

## ğŸ“ Survey Questions

In this experiment, evaluations were conducted using the following metrics.

### NASA-TLX (Cognitive Load)

* **Mental Demand**
  * How much mental and perceptual activity was required (e.g., thinking, deciding, calculating, remembering, looking, searching, etc.) while conversing with the robot?
* **Physical Demand**
  * How much physical activity was required (e.g., pushing, pulling, turning, controlling, activating, etc.) while conversing with the robot?
* **Temporal Demand**
  * How much time pressure did you feel due to the rate or pace at which the tasks or task elements occurred while conversing with the robot?
* **Performance**
  * How successful do you think you were in accomplishing the goals of the task set by yourself while conversing with the robot?
* **Effort**
  * How hard did you have to work (mentally and physically) to accomplish your level of performance?
* **Frustration**
  * How insecure, discouraged, irritated, stressed, and annoyed did you feel while conversing with the robot?

### Trust Scale
Participants answered the degree to which they agreed with the following items:

1. I believe this robot is capable.
2. I trust this robot.
3. This robot's advice is trustworthy.
4. I can rely on this robot.
5. I think this robot's behavior is consistent.
6. I trust that this robot will do its best when I follow its advice.

### Godspeed Questionnaire Series (Impression of the Robot)

#### Anthropomorphism
* Fake â€” Natural
* Machinelike â€” Humanlike
* Unconscious â€” Conscious
* Artificial â€” Lifelike
* Moving rigidly â€” Moving elegantly

#### Animacy
* Dead â€” Alive
* Stagnant â€” Lively
* Mechanical â€” Organic
* Inert â€” Interactive
* Apathetic â€” Responsive

#### Likeability
* Dislike â€” Like
* Unfriendly â€” Friendly
* Unkind â€” Kind
* Unpleasant â€” Pleasant
* Awful â€” Nice

#### Perceived Intelligence
* Incompetent â€” Competent
* Ignorant â€” Knowledgeable
* Irresponsible â€” Responsible
* Unintelligent â€” Intelligent
* Foolish â€” Sensible

#### Perceived Safety
* Anxious â€” Relaxed
* Agitated â€” Calm
* Quiescent â€” Surprised

## ğŸ™Œ Acknowledgements

This survey was conducted with the cooperation of **LLMATCH, a program by the Matsuo-Iwasawa Lab LLM Community at the University of Tokyo.**
We would like to express our deepest gratitude.
